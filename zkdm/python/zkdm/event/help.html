<html>
<head>
	<title>Event Service Help</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head>

<body>

<B>实现 Event Service 接口</B>
<p>
<br>	/event/list: 列出所有 PullPoint
<br>		返回 application/json
<br>				
<br>				{
<br>					"result":"ok",
<br>					"info":"",
<br>					"value": {
<br>						"type":"list",
<br>						"data": [
<br>								1, 2, ...
<br>							]
<br>					}
<br>				}
<br>				其中 data 对应着当前活动的 PullPoint 编号
<br>
<p>
<br>		/event/create_pp: 创建 PullPoint，返回新建 PullPoint 编号...
<br>			返回 application/json
<br>
<br>				{
<br>					"result": "ok",
<br>					"info": "",
<br>					"value": {
<br>						"type": "int",
<br>						"data": 2
<br>					}
<br>				}
<br>				其中 data 对应的 2 是返回的 PullPoint 编号
<br>
<br>
<br>		/event/<B>pid</B>/pull: 阻塞获取 pid 对应的 PullPoint 的消息，如果无消息，10秒超时返回...
<br>			返回 application/json
<br>
<br>
<br>				{
<br>					"result": "ok",
<br>					"info": "",
<br>					"value": {
<br>						"type": "list",
<br>						"data": [ ...]
<br>					}
<br>				}
<br>				其中 data 对应着事件列表 ...
<br>
<br>				如果超时，info 为 "timeouted"
<br>
<br>				事件的格式为：
<br>					{
<br>						"sid": "teacher video 1",
<br>						"catalog": "eval",
<br>						"code": -1,
<br>						"info": "signal lost",
<br>						"stamp": 1407295167
<br>					}
<br>				其中 sid 对应着服务唯一名字，catalog 对应服务类型
<br>
<br>
<br>		/event/<B>pid</B>/unsubscribe: 销毁 pid 对应的 PullPoint
<br>			返回 application/json
<br>
<br>				{
<br>					"result": "ok",
<br>					"info": "unsubscribed"
<br>				}
<br>
<br>				如果 pid 不存在，则返回
<br>				{
<br>					"result": "error",
<br>					"info": "pid NOT found"
<br>				}
<br>
<br>
</body>
</html>

